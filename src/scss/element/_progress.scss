/*
 * React Bucket Framwork
 *
 * Progress @ _progress.scss in 'Element'
 *
 * Defined at 2019-11-23
 * Copyright Marco Cavanna â€¢ 2019
 */


/******
    Progress Container is a Block
    with prefixed with at 100%
******/
.progress {
  display: block;
  width: 100%;
  margin-bottom: .5em;
}


/******
    Progress limits if visibles
    are two limits value of progress
    bar that must be show at left
    and right of the progress bar
******/
.progress.with-limits > .limits {
  display: flex;
  width: 100%;
  justify-content: space-between;
  padding: get-em-spacer() 0;

  /*---
    Limit data is the
    single limit element
  ---*/
  > .limit {
    flex-grow: 1;
    color: $text-light;
    font-weight: $semi-bold;

    &.low {
      text-align: left;
    }

    &.high {
      text-align: right;
    }
  }
}


/******
    The Progress Bar is the container
    for the extensible value
******/
.progress > .bar {
  display: block;
  width: 100%;
  position: relative;
  height: $progress-bar-height;
  background-color: $progress-bar-background;
  border-radius: $progress-bar-height / 2;
  overflow: hidden;
  transition: background-color $transition-duration $transition-ease;
  will-change: transition;

  /*---
    Value is the extensible animated
    bar inside the container
  ---*/
  > .value {
    position: relative;
    display: block;
    height: 100%;
    background-color: $grey-light;
    transition: width $transition-duration $transition-ease, background-color $transition-duration $transition-ease;
  }

  /*---
    Place the Indicator
  ---*/
  > .value > .indicator {
    position: absolute;
    top: 50%;
    right: .5em;
    left: auto;
    transform: translateY(-50%);
    color: rgba(255, 255, 255, .75);
    font-size: .9em;
    font-weight: $bold;
  }
}


/******
    Progress Bar Color
******/
.progress.is-colored {
  &.low {
    > .bar > .value {
      background-color: $danger;
    }

    .progress-circle-value {
      stroke: $danger;
    }
  }

  &.mid {
    > .bar > .value {
      background-color: $warning;
    }

    .progress-circle-value {
      stroke: $warning;
    }
  }

  &.high {
    > .bar > .value {
      background-color: $success;
    }

    .progress-circle-value {
      stroke: $success;
    }
  }

  /*---
    OverValue must color also
    the bar container
  ---*/
  &.is-overvalue.high {
    > .bar {
      background-color: lighten($success, 15%);
    }

    .progress-circle-background {
      stroke: lighten($success, 15%);
    }
  }
}

.progress.is-colored.is-inverted {
  &.low {
    > .bar > .value {
      background-color: $success;
    }

    .progress-circle-value {
      stroke: $success;
    }
  }

  &.high {
    > .bar > .value {
      background-color: $danger;
    }

    .progress-circle-value {
      stroke: $danger;
    }
  }

  /*---
    OverValue must color also
    the bar container
  ---*/
  &.is-overvalue.high {
    > .bar {
      background-color: lighten($danger, 15%);
    }

    .progress-circle-background {
      stroke: lighten($danger, 15%);
    }
  }
}

.progress.is-discrete.is-overvalue {
  > .bar {
    background-color: $grey-light;

    > .value {
      background-color: $grey;
    }
  }

  .progress-circle-background {
    stroke: $grey-light;
  }

  .progress-circle-value {
    stroke: $grey;
  }
}


/******
    Progress Bar Direction
******/
.progress.on-right {
  /*---
    Invert Limits
  ---*/
  &.with-limits > .limits {
    flex-direction: row-reverse;

    > .limit.low {
      text-align: right;
    }

    > .limit.high {
      text-align: left;
    }
  }

  /*---
    Invert Margin
  ---*/
  > .bar > .value {
    margin: 0 0 0 auto;

    > .indicator {
      left: .5em;
      right: auto;
    }
  }
}

/******
    Size Variation
******/
.progress {
  @include size-variation;
}

/******
    Progress Content
******/
.progress.is-circular.has-content {
  display: flex;
  width: 100%;
  flex-wrap: nowrap;
  align-items: center;

  .progress-wrapper {
    height: 1em * $line-height;
    margin-right: .5em;
  }

  .progress-content {
    flex-grow: 1;
    font-size: 1rem;
  }

}

.has-text-right {
  .progress {
    flex-direction: row-reverse;

    .progress-wrapper {
      margin-right: 0;
      margin-left: .5em;
    }
  }
}

/******
    Progress Circular
******/
.progress.is-circular {

  .progress-circle-background,
  .progress-circle-value {
    fill: none;
  }

  .progress-circle-background {
    stroke: $progress-bar-background;
  }

  .progress-circle-value {
    stroke: $grey-light;
    stroke-linecap: round;
    stroke-linejoin: round;
  }
}

/******
    Active Progress has a white overlay
******/
.progress.is-active > .bar > .value {
  min-width: 5%;

  &:after {
    content: ' ';
    opacity: 0;
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background-color: $white;

    animation: progress-active 2s ease infinite;
  }
}

@keyframes :global(progress-active) {
  0% {
    opacity: .5;
    width: 0;
  }
  90% {}
  100% {
    opacity: 0;
    width: 100%;
  }
}
