{"version":3,"file":"Menu.js","sources":["../../../../src/react/collections/Menu/Menu.tsx"],"sourcesContent":["import * as React from 'react';\nimport clsx from 'clsx';\n\nimport {\n  createShorthandFactory,\n  childrenUtils\n} from '@appbuckets/react-ui-core';\n\nimport {\n  CreatableFunctionComponent,\n  ShorthandCollection\n} from '../../generic';\n\nimport {\n  useElementType,\n  useSharedClassName\n} from '../../lib';\n\nimport {\n  useAutoControlledValue\n} from '../../hooks/useAutoControlledValue';\n\nimport { MenuProps } from './Menu.types';\n\nimport MenuItem from './MenuItem';\nimport { MenuItemProps } from './MenuItem.types';\n\n\n/* --------\n * Component Declare\n * -------- */\ntype MenuComponent = CreatableFunctionComponent<MenuProps> & {\n  Item: typeof MenuItem\n};\n\n\n/* --------\n * Component Declare\n * -------- */\nconst Menu: MenuComponent = (props) => {\n\n  const {\n    className,\n    rest: {\n      activeIndex: userDefinedActiveIndex,\n      children,\n      content,\n      defaultActiveIndex,\n      items,\n      onItemClick,\n      secondary,\n      tab,\n      text,\n      vertical,\n      ...rest\n    }\n  } = useSharedClassName(props);\n\n  /** Control Active Index */\n  const [ activeIndex, trySetActiveIndex ] = useAutoControlledValue(0, {\n    prop       : userDefinedActiveIndex,\n    defaultProp: defaultActiveIndex\n  });\n\n  /** Get the component element type */\n  const ElementType = useElementType(Menu, props);\n\n  /** Build the element class list */\n  const classes = clsx(\n    {\n      secondary,\n      tab,\n      text,\n      vertical\n    },\n    'menu',\n    className\n  );\n\n  /** If children are declared, render them */\n  if (!childrenUtils.isNil(children)) {\n    return (\n      <ElementType {...rest} className={classes}>\n        {children}\n      </ElementType>\n    );\n  }\n\n  return (\n    <ElementType {...rest} className={classes}>\n      {Array.isArray(items) ? items.map((item, ix) => (\n        MenuItem.create(item, {\n          autoGenerateKey: true,\n          defaultProps   : {\n            active: activeIndex === ix,\n            index : ix\n          },\n          overrideProps  : (predefinedProps) => ({\n            onClick: (e, itemProps) => {\n              /** Extract Index from Props */\n              const { index } = itemProps;\n              /** Try to set the new Active Index state */\n              trySetActiveIndex(index as number);\n              /** Invoke props if exists */\n              if (onItemClick) {\n                onItemClick(e, itemProps);\n              }\n              if (predefinedProps.onClick) {\n                predefinedProps.onClick(e, itemProps);\n              }\n            }\n          })\n        })\n      )) : content}\n    </ElementType>\n  );\n};\n\nMenu.displayName = 'Menu';\n\nMenu.create = createShorthandFactory(Menu, (items) => ({\n  items: items as ShorthandCollection<MenuItemProps>\n}));\n\nMenu.Item = MenuItem;\n\nexport default Menu;\n"],"names":["useSharedClassName","useAutoControlledValue","useElementType","clsx","childrenUtils","React.createElement","createShorthandFactory"],"mappings":";;;;;;;;;;;;;;;AAoCA;;;IAGM,IAAI,GAAkB,UAAC,KAAK;IAEhC,IAAM,KAeFA,6BAAkB,CAAC,KAAK,CAAC,EAd3B,SAAS,eAAA,EACT,YAYC,EAXc,sBAAsB,iBAAA,EACnC,QAAQ,cAAA,EACR,OAAO,aAAA,EACP,kBAAkB,wBAAA,EAClB,KAAK,WAAA,EACL,WAAW,iBAAA,EACX,SAAS,eAAA,EACT,GAAG,SAAA,EACH,IAAI,UAAA,EACJ,QAAQ,cAAA,EACL,IAAI,qBAXH,4HAYL,CAC0B,CAAC;;IAGxB,IAAA,KAAqCC,6CAAsB,CAAC,CAAC,EAAE;QACnE,IAAI,EAAS,sBAAsB;QACnC,WAAW,EAAE,kBAAkB;KAChC,CAAC,EAHM,WAAW,QAAA,EAAE,iBAAiB,QAGpC,CAAC;;IAGH,IAAM,WAAW,GAAGC,yBAAc,CAAC,IAAI,EAAE,KAAK,CAAC,CAAC;;IAGhD,IAAM,OAAO,GAAGC,wBAAI,CAClB;QACE,SAAS,WAAA;QACT,GAAG,KAAA;QACH,IAAI,MAAA;QACJ,QAAQ,UAAA;KACT,EACD,MAAM,EACN,SAAS,CACV,CAAC;;IAGF,IAAI,CAACC,yBAAa,CAAC,KAAK,CAAC,QAAQ,CAAC,EAAE;QAClC,QACEC,oBAAC,WAAW,sBAAK,IAAI,IAAE,SAAS,EAAE,OAAO,KACtC,QAAQ,CACG,EACd;KACH;IAED,QACEA,oBAAC,WAAW,sBAAK,IAAI,IAAE,SAAS,EAAE,OAAO,KACtC,KAAK,CAAC,OAAO,CAAC,KAAK,CAAC,GAAG,KAAK,CAAC,GAAG,CAAC,UAAC,IAAI,EAAE,EAAE,IAAK,QAC9C,QAAQ,CAAC,MAAM,CAAC,IAAI,EAAE;QACpB,eAAe,EAAE,IAAI;QACrB,YAAY,EAAK;YACf,MAAM,EAAE,WAAW,KAAK,EAAE;YAC1B,KAAK,EAAG,EAAE;SACX;QACD,aAAa,EAAI,UAAC,eAAe,IAAK,QAAC;YACrC,OAAO,EAAE,UAAC,CAAC,EAAE,SAAS;;gBAEZ,IAAA,KAAK,GAAK,SAAS,MAAd,CAAe;;gBAE5B,iBAAiB,CAAC,KAAe,CAAC,CAAC;;gBAEnC,IAAI,WAAW,EAAE;oBACf,WAAW,CAAC,CAAC,EAAE,SAAS,CAAC,CAAC;iBAC3B;gBACD,IAAI,eAAe,CAAC,OAAO,EAAE;oBAC3B,eAAe,CAAC,OAAO,CAAC,CAAC,EAAE,SAAS,CAAC,CAAC;iBACvC;aACF;SACF,IAAC;KACH,CAAC,IACH,CAAC,GAAG,OAAO,CACA,EACd;AACJ,EAAE;AAEF,IAAI,CAAC,WAAW,GAAG,MAAM,CAAC;AAE1B,IAAI,CAAC,MAAM,GAAGC,kCAAsB,CAAC,IAAI,EAAE,UAAC,KAAK,IAAK,QAAC;IACrD,KAAK,EAAE,KAA2C;CACnD,IAAC,CAAC,CAAC;AAEJ,IAAI,CAAC,IAAI,GAAG,QAAQ;;;;"}