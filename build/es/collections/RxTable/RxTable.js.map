{"version":3,"file":"RxTable.js","sources":["../../../../src/react/collections/RxTable/RxTable.tsx"],"sourcesContent":["import * as React from 'react';\nimport clsx from 'clsx';\n\nimport { PropsWithAs } from '@appbuckets/react-ui-core';\n\nimport { AnyObject } from '../../generic';\n\nimport { useElementType } from '../../lib';\n\nimport { RxTableContext, RxTableProvider } from './RxTable.context';\nimport { useRxTableFactory } from './RxTable.factory';\n\nimport { RxTableComponents, RxTableProps } from './RxTable.types';\n\nimport {\n  RxTableBodyCell,\n  RxTableBodyRow,\n  RxTableError,\n  RxTableFilterCell,\n  RxTableHeaderCell,\n  RxTableLoader,\n  RxTableNoContent\n} from './RxTableDefaultComponents';\n\nimport { Table } from '../Table';\n\nimport { RxTableBody } from './RxTableBody';\nimport { RxTableHeader } from './RxTableHeader';\n\n\n/* --------\n * Component Declare\n * -------- */\ntype RxTableComponent<Data> = React.FunctionComponent<RxTableProps<Data>>;\n\n\n/* --------\n * Component Render\n * -------- */\nconst RxTable = <Data extends AnyObject>(\n  props: React.PropsWithChildren<RxTableProps<Data>>\n): React.FunctionComponentElement<RxTableProps<Data>> => {\n\n  const {\n    as,\n    className,\n    columns,\n    Components           : userDefinedComponents,\n    data,\n    defaultData,\n    defaultReverseSorting: userDefinedDefaultReverseSorting,\n    defaultSort          : userDefinedDefaultSort,\n    disableHeader,\n    filterLogic,\n    initiallyLoading,\n    onRowClick,\n    onSortChange,\n    reloadDependency,\n    reloadSilently,\n    reverseSorting       : userDefinedReverseSorting,\n    rowKey,\n    sort                 : userDefinedSort,\n    style,\n    ...rest\n  } = props;\n\n  /** Get right element type */\n  const ElementType = useElementType(RxTable, props as unknown as PropsWithAs<RxTableProps<AnyObject>>);\n\n  /** Use RxTable Factory to get Data and Props */\n  const rxTableProps = useRxTableFactory<Data>({\n    columns,\n    data,\n    defaultData,\n    defaultLoading       : initiallyLoading,\n    defaultReverseSorting: userDefinedDefaultReverseSorting,\n    defaultSort          : userDefinedDefaultSort,\n    filterLogic,\n    onRowClick,\n    onSortChange,\n    reloadDependency,\n    reloadSilently,\n    reverseSorting       : userDefinedReverseSorting,\n    sort                 : userDefinedSort\n  });\n\n\n  /** Build the element class list */\n  const classes = clsx(\n    rxTableProps.hasFilterRow && 'filterable',\n    'rx-table',\n    className\n  );\n\n\n  /* --------\n   * Define RxTable Components\n   * -------- */\n  const Components: RxTableComponents<Data> = {\n    Body         : Table.Body,\n    BodyCell     : RxTableBodyCell,\n    BodyRow      : RxTableBodyRow,\n    BodyWrapper  : React.Fragment,\n    Error        : RxTableError,\n    ErrorRow     : Table.Row,\n    ErrorCell    : Table.Cell,\n    FilterCell   : RxTableFilterCell,\n    FilterRow    : Table.Row,\n    Header       : Table.Header,\n    HeaderCell   : RxTableHeaderCell,\n    HeaderRow    : Table.Row,\n    HeaderWrapper: React.Fragment,\n    Loader       : RxTableLoader,\n    LoaderRow    : Table.Row,\n    LoaderCell   : Table.Cell,\n    NoContent    : RxTableNoContent,\n    NoContentCell: Table.Cell,\n    NoContentRow : Table.Row,\n    ...userDefinedComponents\n  };\n\n\n  /* --------\n   * Row Key Getter\n   * -------- */\n  const getRowKey = React.useCallback(\n    (row: Data, index: number) => {\n      if (typeof rowKey === 'function') {\n        return rowKey(row, index, rxTableProps.tableData);\n      }\n\n      return row[rowKey];\n    },\n    [ rowKey, rxTableProps.tableData ]\n  );\n\n\n  /* --------\n   * Context Building\n   * -------- */\n  const rxTableContext: RxTableContext<Data> = {\n    ...rxTableProps,\n    Components,\n    columns,\n    getRowKey\n  };\n\n\n  /* --------\n   * Component Render\n   * -------- */\n  return (\n    <RxTableProvider value={rxTableContext}>\n      <ElementType className={classes} {...rest}>\n        <RxTableHeader />\n        <RxTableBody />\n      </ElementType>\n    </RxTableProvider>\n  );\n};\n\n(RxTable as RxTableComponent<any>).displayName = 'RxTable';\n\n(RxTable as RxTableComponent<any>).defaultProps = {\n  as              : Table,\n  filterLogic     : 'and',\n  initiallyLoading: true,\n  reloadSilently  : true\n};\n\nexport default RxTable;\n"],"names":["useElementType","useRxTableFactory","clsx","RxTableBodyCell","RxTableBodyRow","React.Fragment","RxTableError","RxTableFilterCell","RxTableHeaderCell","RxTableLoader","RxTableNoContent","React.useCallback","React.createElement","RxTableProvider","RxTableHeader","RxTableBody"],"mappings":"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"}