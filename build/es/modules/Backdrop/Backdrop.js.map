{"version":3,"file":"Backdrop.js","sources":["../../../../src/react/modules/Backdrop/Backdrop.tsx"],"sourcesContent":["import * as React from 'react';\nimport clsx from 'clsx';\n\nimport {\n  createShorthandFactory,\n  childrenUtils,\n  isBrowser as checkIsBrowser,\n  Portal\n} from '@appbuckets/react-ui-core';\n\nimport { Loader } from '../../elements/Loader';\nimport { CreatableFunctionComponent } from '../../generic';\n\nimport BackdropInner from './BackdropInner';\n\nimport { BackdropProps } from './Backdrop.types';\n\n\n/* --------\n * Component Declare\n * -------- */\ntype BackdropComponent = CreatableFunctionComponent<BackdropProps> & {\n  Inner: typeof BackdropInner\n};\n\n\n/* --------\n * Component Render\n * -------- */\nconst Backdrop: BackdropComponent = (props) => {\n\n  // ----\n  // Get Backdrop Props\n  // ----\n  const {\n    /** Backdrop Props */\n    className,\n    closeOnBackdropClick,\n    children,\n    content,\n    loading,\n    loaderProps,\n    page,\n    visible,\n\n    /** Handled Portal Props */\n    closeOnDocumentClick,\n    closeOnEscape,\n    onClose,\n    onMount,\n    onOpen,\n    onUnmount,\n    openOnTriggerClick,\n    openOnTriggerFocus,\n    openOnTriggerMouseEnter,\n    trigger,\n    triggerRef,\n\n    /** OnClick must be stripped to rest props passed down to Backdrop Inner */\n    onClick,\n\n    /** All other Props */\n    ...rest\n  } = props;\n\n  /** Check if code is running on browser */\n  const isBrowser = React.useMemo(\n    () => checkIsBrowser(),\n    []\n  );\n\n\n  // ----\n  // Define Backdrop Handlers\n  // ----\n  const handlePortalMount = () => {\n    if (isBrowser) {\n      document.body.classList.add('dimmable');\n      document.body.classList.add('dimmed');\n    }\n\n    if (onMount) {\n      onMount(null, props);\n    }\n  };\n\n  const handlePortalUnmount = () => {\n    if (isBrowser) {\n      document.body.classList.remove('dimmable');\n      document.body.classList.remove('dimmed');\n    }\n\n    if (onUnmount) {\n      onUnmount(null, props);\n    }\n  };\n\n  const handlePortalOpen = (e: React.MouseEvent<HTMLElement>) => {\n    if (onOpen) {\n      onOpen(e, props);\n    }\n  };\n\n  const handlePortalClose = (e: React.MouseEvent<HTMLElement>) => {\n    if (onClose) {\n      onClose(e, props);\n    }\n  };\n\n  const handleOutsideContentClick = (e: React.MouseEvent<HTMLElement>) => {\n    if (visible && closeOnBackdropClick) {\n      handlePortalClose(e);\n    }\n  };\n\n\n  // ----\n  // Define Classes\n  // ----\n  const innerClasses = clsx(\n    className,\n    { loading, page }\n  );\n\n\n  // ----\n  // Memoized Elements\n  // ----\n  const innerContent = (\n    <BackdropInner\n      {...rest}\n      className={innerClasses}\n      visible={visible}\n      onClickOutside={handleOutsideContentClick}\n    >\n      {loading\n        ? Loader.create(\n          { appearance: 'white', size: 'big', centered: true, ...loaderProps },\n          { autoGenerateKey: false }\n        )\n        : (childrenUtils.isNil(children) ? content : children)}\n    </BackdropInner>\n  );\n\n  /** Return the Dimmer */\n  if (page) {\n    return (\n      <Portal\n        closeOnEscape={closeOnEscape}\n        closeOnDocumentClick={closeOnDocumentClick}\n        open={visible}\n        openOnTriggerClick={openOnTriggerClick}\n        openOnTriggerMouseEnter={openOnTriggerMouseEnter}\n        openOnTriggerFocus={openOnTriggerFocus}\n        trigger={trigger}\n        triggerRef={triggerRef}\n        onClose={handlePortalClose}\n        onOpen={handlePortalOpen}\n        onMount={handlePortalMount}\n        onUnmount={handlePortalUnmount}\n      >\n        {innerContent}\n      </Portal>\n    );\n  }\n\n  /** Else, return the Backdrop Inner Content */\n  return innerContent;\n};\n\n/** Properly set the Display Name */\nBackdrop.displayName = 'Backdrop';\n\n/** Append Child Component */\nBackdrop.Inner = BackdropInner;\n\n/** Backdrop could be created using shorthand */\nBackdrop.create = createShorthandFactory(Backdrop, (content) => ({ content }));\n\nexport default Backdrop;\n"],"names":["React.useMemo","checkIsBrowser","clsx","React.createElement","childrenUtils","Portal","createShorthandFactory"],"mappings":"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"}