{"version":3,"file":"Button.js","sources":["../../../../src/react/elements/Button/Button.tsx"],"sourcesContent":["import * as React from 'react';\nimport clsx from 'clsx';\n\nimport {\n  createShorthandFactory,\n  childrenUtils,\n  classByPattern\n} from '@appbuckets/react-ui-core';\n\nimport { CreatableFunctionComponent } from '../../generic';\n\nimport {\n  useElementType,\n  useSharedClassName,\n  useSplitStateClassName\n} from '../../lib';\n\nimport { ButtonProps } from './Button.types';\nimport ButtonGroup from './ButtonGroup';\n\nimport { Icon } from '../Icon';\nimport { Popup } from '../../modules/Popup';\n\n\n/* --------\n * Component Declaration\n * -------- */\ntype ButtonComponent = CreatableFunctionComponent<ButtonProps> & {\n  Group: typeof ButtonGroup;\n};\n\n\n/* --------\n * Component Render\n * -------- */\nconst Button: ButtonComponent = (props) => {\n\n  const {\n    className,\n    rest: {\n      children,\n      content,\n      active,\n      disabled,\n      fab,\n      fitted,\n      flat,\n      full,\n      icon,\n      iconPosition,\n      inverted,\n      loading,\n      onClick,\n      role,\n      rounded,\n      tabIndex: userDefinedTabIndex,\n      toggle,\n      tooltip,\n      type,\n      ...rawRest\n    }\n  } = useSharedClassName(props);\n\n  /** Get the component element type */\n  const ElementType = useElementType(Button, props);\n\n  /** Split state className from rest props */\n  const [ stateClasses, rest ] = useSplitStateClassName(rawRest);\n\n\n  /**\n   * Compute the correct\n   * button aria role based on button type\n   */\n  const ariaRole = React.useMemo<string | null>(() => {\n    /** If role is defined, return it */\n    if (role != null) {\n      return role;\n    }\n    /** If element is a button, return button */\n    if (ElementType === 'button') {\n      return 'button';\n    }\n    /** Else, return null */\n    return null;\n  }, [ role, ElementType ]);\n\n\n  /**\n   * Compute the right tab index using\n   * the disabled prop and/or the original\n   * tabIndex property defined by user\n   */\n  const tabIndex = React.useMemo<number | null>(() => {\n    /** If tabIndex has been defined by user return it */\n    if (userDefinedTabIndex != null) {\n      return userDefinedTabIndex;\n    }\n    /** If component is disabled, strict tabIndex to -1 */\n    if (disabled) {\n      return -1;\n    }\n    /** If the element has been rendered as a 'div' element, return 0 */\n    if (ElementType === 'div') {\n      return 0;\n    }\n    /** Fallback to null */\n    return null;\n  }, [ userDefinedTabIndex, disabled, ElementType ]);\n\n\n  /** Build an handler for click event */\n  const handleClick = (e: React.MouseEvent<HTMLButtonElement>) => {\n    /** If button is disabled, prevent any click */\n    if (disabled) {\n      e.preventDefault();\n      return;\n    }\n    /** If the onClick function exists, invoke it */\n    if (typeof onClick === 'function') {\n      /** Stop event Propagation */\n      e.stopPropagation();\n      onClick(e, props);\n    }\n  };\n\n  /** Build the element class list */\n  const classes = clsx(\n    {\n      fab        : fab && !content && !children,\n      disabled,\n      fitted,\n      flat,\n      inverted,\n      loading,\n      rounded,\n      full,\n      active,\n      toggle,\n      'with-icon': icon && (children || content),\n      'as-icon'  : icon && !children && !content\n    },\n    classByPattern(icon && (children || content) && iconPosition, 'icon-on-%value%'),\n    stateClasses,\n    'button',\n    className\n  );\n\n  /** Build the Button Element Props */\n  const buttonProps = {\n    ...rest,\n    type,\n    tabIndex,\n    className: classes,\n    disabled : (disabled && ElementType === 'button') || undefined,\n    role     : ariaRole,\n    onClick  : handleClick\n  } as ButtonProps;\n\n  /** If there are children render them */\n  if (!childrenUtils.isNil(children)) {\n    const buttonElementWithChildren = (\n      <ElementType {...buttonProps}>\n        {children}\n      </ElementType>\n    );\n\n    return tooltip\n      ? <Popup content={tooltip} trigger={buttonElementWithChildren} />\n      : buttonElementWithChildren;\n  }\n\n  /** Build the icon if Exists */\n  const iconElement = icon && Icon.create(icon, { autoGenerateKey: false });\n\n  /** Else, build the button using shortHand */\n  const buttonElement = (\n    <ElementType\n      {...rest}\n      className={classes}\n      disabled={(disabled && ElementType === 'button') || undefined}\n      role={ariaRole}\n      type={type}\n      tabIndex={tabIndex}\n      onClick={handleClick}\n    >\n      {iconPosition === 'left' && iconElement}\n      {content}\n      {iconPosition === 'right' && iconElement}\n    </ElementType>\n  );\n\n  return tooltip\n    ? <Popup content={tooltip} trigger={buttonElement} />\n    : buttonElement;\n};\n\n/** Add the Group */\nButton.Group = ButtonGroup;\n\n/** Set button Default Props */\nButton.defaultProps = {\n  as          : 'button',\n  iconPosition: 'left',\n  type        : 'button'\n};\n\n/** Properly set Display Name */\nButton.displayName = 'Button';\n\n/** Create the Shorthand Factory Method */\nButton.create = createShorthandFactory(Button, (content) => ({ content }));\n\nexport default Button;\n"],"names":["useSharedClassName","useElementType","useSplitStateClassName","React.useMemo","clsx","classByPattern","__assign","childrenUtils","React.createElement","createShorthandFactory"],"mappings":"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"}