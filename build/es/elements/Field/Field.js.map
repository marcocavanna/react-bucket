{"version":3,"file":"Field.js","sources":["../../../../src/react/elements/Field/Field.tsx"],"sourcesContent":["import * as React from 'react';\nimport clsx from 'clsx';\n\nimport {\n  createShorthandFactory,\n  childrenUtils\n} from '@appbuckets/react-ui-core';\n\nimport {\n  useSharedClassName,\n  useSplitStateClassName\n} from '../../lib';\n\nimport {\n  CreatableFunctionComponent\n} from '../../generic';\n\nimport { FieldProps } from './Field.types';\nimport { Icon } from '../Icon';\nimport { ButtonGroup } from '../Button';\n\n\n/* --------\n * Component Declare\n * -------- */\ntype FieldRenderFunction = React.ForwardRefRenderFunction<HTMLDivElement, FieldProps>;\n\ntype FieldComponent = CreatableFunctionComponent<FieldProps>;\n\n\n/* --------\n * Component Render\n * -------- */\nconst FieldRender: FieldRenderFunction = (\n  props: FieldProps,\n  ref\n) => {\n  const {\n    className,\n    rest: {\n      actions,\n      actionsPosition,\n      children,\n      content,\n      contentClassName,\n      clearable,\n      disabled,\n      hint,\n      hintClassName,\n      icon,\n      iconPosition,\n      isFocused,\n      isDirty,\n      isTouched,\n      label,\n      onClear,\n      required,\n      readOnly,\n      contentType,\n      ...rawRest\n    }\n  } = useSharedClassName(props);\n\n  const [ stateClassName, rest ] = useSplitStateClassName(rawRest);\n\n\n  /* --------\n   * Define Classes to Use\n   * -------- */\n  const classes = clsx(\n    {\n      required,\n      disabled,\n      dirty   : isDirty,\n      focused : isFocused,\n      touched : isTouched,\n      readonly: readOnly,\n      clearable\n    },\n    contentType,\n    'field',\n    stateClassName,\n    className\n  );\n\n  const containerClasses = React.useMemo(\n    () => clsx(\n      {\n        'action-on-left' : actions?.length && actionsPosition === 'left',\n        'action-on-right': actions?.length && actionsPosition === 'right'\n      },\n      'wrapper'\n    ),\n    [\n      actions,\n      actionsPosition\n    ]\n  );\n\n  const contentClasses = React.useMemo(\n    () => clsx(\n      'content',\n      {\n        'icon-on-left' : !!icon && iconPosition === 'left',\n        'icon-on-right': !!icon && iconPosition === 'right'\n      },\n      contentClassName\n    ),\n    [\n      contentClassName,\n      icon,\n      iconPosition\n    ]\n  );\n\n\n  /* --------\n   * Compute Field Addon\n   * -------- */\n  const actionsElement = React.useMemo(\n    () => {\n      if (actions?.length) {\n        return ButtonGroup.create(actions, { autoGenerateKey: true });\n      }\n\n      return null;\n    },\n    [ actions ]\n  );\n\n  const leftFieldContent = React.useMemo(\n    () => ((actionsElement && actionsPosition === 'left')) && (\n      <div className={'addon left'}>\n        {actionsPosition === 'left' && actionsElement}\n      </div>\n    ),\n    [\n      actionsElement,\n      actionsPosition\n    ]\n  );\n\n  const rightFieldContent = React.useMemo(\n    () => ((actionsElement && actionsPosition === 'right')) && (\n      <div className={'addon right'}>\n        {actionsPosition === 'right' && actionsElement}\n      </div>\n    ),\n    [\n      actionsElement,\n      actionsPosition\n    ]\n  );\n\n  const iconContent = React.useMemo(\n    () => icon && Icon.create(icon, { autoGenerateKey: false }),\n    [ icon ]\n  );\n\n  const hintElement = React.useMemo(\n    () => {\n      if (!hint) {\n        return null;\n      }\n\n      const hintClasses = clsx(\n        'addon down',\n        'hint',\n        hintClassName\n      );\n\n      return (\n        <div className={hintClasses}>\n          {hint}\n        </div>\n      );\n    },\n    [ hint, hintClassName ]\n  );\n\n\n  /* --------\n   * Input Actions\n   * -------- */\n  const clearButton = React.useMemo(\n    () => clearable && !disabled && !readOnly && Icon.create({\n      name   : 'times',\n      onClick: onClear\n    }, {\n      autoGenerateKey: true,\n      defaultProps   : { className: 'clear' }\n    }),\n    [ onClear, clearable, disabled, readOnly ]\n  );\n\n\n  /* --------\n   * Render Component\n   * -------- */\n  return (\n    <div {...rest} ref={ref} className={classes}>\n      {label && <label htmlFor={props.id}>{label}</label>}\n\n      <div className={containerClasses}>\n        {leftFieldContent}\n        <div className={contentClasses}>\n          {iconPosition === 'left' && iconContent}\n          {childrenUtils.isNil(children) ? content : children}\n          {clearButton}\n          {iconPosition === 'right' && iconContent}\n        </div>\n        {rightFieldContent}\n      </div>\n\n      {hintElement}\n    </div>\n  );\n};\n\nconst Field: FieldComponent = React.forwardRef(FieldRender) as unknown as FieldComponent;\n\nField.defaultProps = {\n  actionsPosition: 'right',\n  iconPosition   : 'left'\n};\n\nField.create = createShorthandFactory(Field, content => ({ content }));\n\nexport default Field;\n"],"names":["useSharedClassName","useSplitStateClassName","clsx","React.useMemo","React.createElement","childrenUtils","React.forwardRef","createShorthandFactory"],"mappings":";;;;;;;;;;;;;;;;AA8BA;;;AAGA,IAAM,WAAW,GAAwB,UACvC,KAAiB,EACjB,GAAG;IAEH,IAAM,KAwBFA,6BAAkB,CAAC,KAAK,CAAC,EAvB3B,SAAS,eAAA,EACT,YAqBC,EApBC,OAAO,aAAA,EACP,eAAe,qBAAA,EACf,QAAQ,cAAA,EACR,OAAO,aAAA,EACP,gBAAgB,sBAAA,EAChB,SAAS,eAAA,EACT,QAAQ,cAAA,EACR,IAAI,UAAA,EACJ,aAAa,mBAAA,EACb,IAAI,UAAA,EACJ,YAAY,kBAAA,EACZ,SAAS,eAAA,EACT,OAAO,aAAA,EACP,SAAS,eAAA,EACT,KAAK,WAAA,EACL,OAAO,aAAA,EACP,QAAQ,cAAA,EACR,QAAQ,cAAA,EACR,WAAW,iBAAA,EACR,OAAO,qBApBN,mPAqBL,CAC0B,CAAC;IAExB,IAAA,KAA2BC,iCAAsB,CAAC,OAAO,CAAC,EAAxD,cAAc,QAAA,EAAE,IAAI,QAAoC,CAAC;;;;IAMjE,IAAM,OAAO,GAAGC,wBAAI,CAClB;QACE,QAAQ,UAAA;QACR,QAAQ,UAAA;QACR,KAAK,EAAK,OAAO;QACjB,OAAO,EAAG,SAAS;QACnB,OAAO,EAAG,SAAS;QACnB,QAAQ,EAAE,QAAQ;QAClB,SAAS,WAAA;KACV,EACD,WAAW,EACX,OAAO,EACP,cAAc,EACd,SAAS,CACV,CAAC;IAEF,IAAM,gBAAgB,GAAGC,aAAa,CACpC,cAAM,OAAAD,wBAAI,CACR;QACE,gBAAgB,EAAG,CAAA,OAAO,aAAP,OAAO,uBAAP,OAAO,CAAE,MAAM,KAAI,eAAe,KAAK,MAAM;QAChE,iBAAiB,EAAE,CAAA,OAAO,aAAP,OAAO,uBAAP,OAAO,CAAE,MAAM,KAAI,eAAe,KAAK,OAAO;KAClE,EACD,SAAS,CACV,GAAA,EACD;QACE,OAAO;QACP,eAAe;KAChB,CACF,CAAC;IAEF,IAAM,cAAc,GAAGC,aAAa,CAClC,cAAM,OAAAD,wBAAI,CACR,SAAS,EACT;QACE,cAAc,EAAG,CAAC,CAAC,IAAI,IAAI,YAAY,KAAK,MAAM;QAClD,eAAe,EAAE,CAAC,CAAC,IAAI,IAAI,YAAY,KAAK,OAAO;KACpD,EACD,gBAAgB,CACjB,GAAA,EACD;QACE,gBAAgB;QAChB,IAAI;QACJ,YAAY;KACb,CACF,CAAC;;;;IAMF,IAAM,cAAc,GAAGC,aAAa,CAClC;QACE,IAAI,OAAO,aAAP,OAAO,uBAAP,OAAO,CAAE,MAAM,EAAE;YACnB,OAAO,WAAW,CAAC,MAAM,CAAC,OAAO,EAAE,EAAE,eAAe,EAAE,IAAI,EAAE,CAAC,CAAC;SAC/D;QAED,OAAO,IAAI,CAAC;KACb,EACD,CAAE,OAAO,CAAE,CACZ,CAAC;IAEF,IAAM,gBAAgB,GAAGA,aAAa,CACpC,cAAM,OAAA,EAAE,cAAc,IAAI,eAAe,KAAK,MAAM,OAClDC,6BAAK,SAAS,EAAE,YAAY,IACzB,eAAe,KAAK,MAAM,IAAI,cAAc,CACzC,CACP,GAAA,EACD;QACE,cAAc;QACd,eAAe;KAChB,CACF,CAAC;IAEF,IAAM,iBAAiB,GAAGD,aAAa,CACrC,cAAM,OAAA,EAAE,cAAc,IAAI,eAAe,KAAK,OAAO,OACnDC,6BAAK,SAAS,EAAE,aAAa,IAC1B,eAAe,KAAK,OAAO,IAAI,cAAc,CAC1C,CACP,GAAA,EACD;QACE,cAAc;QACd,eAAe;KAChB,CACF,CAAC;IAEF,IAAM,WAAW,GAAGD,aAAa,CAC/B,cAAM,OAAA,IAAI,IAAI,IAAI,CAAC,MAAM,CAAC,IAAI,EAAE,EAAE,eAAe,EAAE,KAAK,EAAE,CAAC,GAAA,EAC3D,CAAE,IAAI,CAAE,CACT,CAAC;IAEF,IAAM,WAAW,GAAGA,aAAa,CAC/B;QACE,IAAI,CAAC,IAAI,EAAE;YACT,OAAO,IAAI,CAAC;SACb;QAED,IAAM,WAAW,GAAGD,wBAAI,CACtB,YAAY,EACZ,MAAM,EACN,aAAa,CACd,CAAC;QAEF,QACEE,6BAAK,SAAS,EAAE,WAAW,IACxB,IAAI,CACD,EACN;KACH,EACD,CAAE,IAAI,EAAE,aAAa,CAAE,CACxB,CAAC;;;;IAMF,IAAM,WAAW,GAAGD,aAAa,CAC/B,cAAM,OAAA,SAAS,IAAI,CAAC,QAAQ,IAAI,CAAC,QAAQ,IAAI,IAAI,CAAC,MAAM,CAAC;QACvD,IAAI,EAAK,OAAO;QAChB,OAAO,EAAE,OAAO;KACjB,EAAE;QACD,eAAe,EAAE,IAAI;QACrB,YAAY,EAAK,EAAE,SAAS,EAAE,OAAO,EAAE;KACxC,CAAC,GAAA,EACF,CAAE,OAAO,EAAE,SAAS,EAAE,QAAQ,EAAE,QAAQ,CAAE,CAC3C,CAAC;;;;IAMF,QACEC,+CAAS,IAAI,IAAE,GAAG,EAAE,GAAG,EAAE,SAAS,EAAE,OAAO;QACxC,KAAK,IAAIA,+BAAO,OAAO,EAAE,KAAK,CAAC,EAAE,IAAG,KAAK,CAAS;QAEnDA,6BAAK,SAAS,EAAE,gBAAgB;YAC7B,gBAAgB;YACjBA,6BAAK,SAAS,EAAE,cAAc;gBAC3B,YAAY,KAAK,MAAM,IAAI,WAAW;gBACtCC,yBAAa,CAAC,KAAK,CAAC,QAAQ,CAAC,GAAG,OAAO,GAAG,QAAQ;gBAClD,WAAW;gBACX,YAAY,KAAK,OAAO,IAAI,WAAW,CACpC;YACL,iBAAiB,CACd;QAEL,WAAW,CACR,EACN;AACJ,CAAC,CAAC;IAEI,KAAK,GAAmBC,gBAAgB,CAAC,WAAW,EAA+B;AAEzF,KAAK,CAAC,YAAY,GAAG;IACnB,eAAe,EAAE,OAAO;IACxB,YAAY,EAAK,MAAM;CACxB,CAAC;AAEF,KAAK,CAAC,MAAM,GAAGC,kCAAsB,CAAC,KAAK,EAAE,UAAA,OAAO,IAAI,QAAC,EAAE,OAAO,SAAA,EAAE,IAAC,CAAC;;;;"}