{"version":3,"file":"Avatar.js","sources":["../../../../src/react/elements/Avatar/Avatar.tsx"],"sourcesContent":["import * as React from 'react';\nimport clsx from 'clsx';\n\nimport {\n  childrenUtils,\n  createShorthandFactory\n} from '@appbuckets/react-ui-core';\n\nimport { CreatableFunctionComponent } from '../../generic';\n\nimport {\n  useElementType,\n  useSharedClassName,\n  useSplitStateClassName\n} from '../../lib';\n\nimport { Badge } from '../Badge';\nimport { Icon } from '../Icon';\n\nimport { AvatarProps } from './Avatar.types';\nimport { Popup } from '../../modules/Popup';\n\n\n/* --------\n * Component Declare\n * -------- */\ntype AvatarComponent = CreatableFunctionComponent<AvatarProps>;\n\n\n/* --------\n * Component Render\n * -------- */\nconst Avatar: AvatarComponent = (props) => {\n\n  const {\n    className,\n    rest: {\n      badge,\n      content,\n      children,\n      disabled,\n      icon,\n      onClick,\n      tooltip,\n      type,\n      ...rawRest\n    }\n  } = useSharedClassName(props);\n\n  /** Get the component element type */\n  const ElementType = useElementType(Avatar, props);\n\n  /** Split state className from rest props */\n  const [ stateClasses, rest ] = useSplitStateClassName(rawRest);\n\n  /** Build the element class list */\n  const classes = clsx(\n    {\n      badged   : badge,\n      disabled,\n      clickable: onClick\n    },\n    type,\n    'avatar',\n    stateClasses,\n    className\n  );\n\n  /** Check if Component has Children */\n  const hasChildren = !childrenUtils.isNil(children);\n\n  const handleClick = (e: React.MouseEvent<HTMLElement>) => {\n    /** Call user defined handler */\n    if (onClick && !disabled) {\n      /** Disable event propagation */\n      e.stopPropagation();\n\n      onClick(e, props);\n    }\n  };\n\n\n  // ----\n  // Build Memoized Element\n  // ----\n  const avatarContentElement = React.useMemo(\n    () => {\n      if (hasChildren) {\n        return null;\n      }\n\n      if (icon) {\n        return Icon.create(icon, { autoGenerateKey: false });\n      }\n\n      return content;\n    },\n    [ icon, content, hasChildren ]\n  );\n\n  const badgeElement = React.useMemo(\n    () => (badge === true\n      ? <Badge />\n      : Badge.create(badge, {\n        autoGenerateKey: false\n      })),\n    [ badge ]\n  );\n\n\n  // ----\n  // Build the Element that could be wrapped inside a tooltip\n  // ----\n  const avatarElement = (\n    <ElementType {...rest} onClick={handleClick} className={classes}>\n      <div className={'content'}>\n        {hasChildren ? children : avatarContentElement}\n      </div>\n      {badgeElement}\n    </ElementType>\n  );\n\n  return tooltip && !disabled\n    ? (\n      <Popup\n        trigger={avatarElement}\n        content={tooltip}\n      />\n    )\n    : avatarElement;\n};\n\nAvatar.displayName = 'Avatar';\n\nAvatar.defaultProps = {\n  type: 'round'\n} as Partial<AvatarProps>;\n\nAvatar.create = createShorthandFactory(Avatar, (content) => ({ content }));\n\nexport default Avatar;\n"],"names":["useSharedClassName","useElementType","useSplitStateClassName","clsx","childrenUtils","React.useMemo","React.createElement","createShorthandFactory"],"mappings":";;;;;;;;;;;;;;;;AA6BA;;;IAGM,MAAM,GAAoB,UAAC,KAAK;IAEpC,IAAM,KAaFA,6BAAkB,CAAC,KAAK,CAAC,EAZ3B,SAAS,eAAA,EACT,YAUC,EATC,KAAK,WAAA,EACL,OAAO,aAAA,EACP,QAAQ,cAAA,EACR,QAAQ,cAAA,EACR,IAAI,UAAA,EACJ,OAAO,aAAA,EACP,OAAO,aAAA,EACP,IAAI,UAAA,EACD,OAAO,qBATN,kFAUL,CAC0B,CAAC;;IAG9B,IAAM,WAAW,GAAGC,yBAAc,CAAC,MAAM,EAAE,KAAK,CAAC,CAAC;;IAG5C,IAAA,KAAyBC,iCAAsB,CAAC,OAAO,CAAC,EAAtD,YAAY,QAAA,EAAE,IAAI,QAAoC,CAAC;;IAG/D,IAAM,OAAO,GAAGC,wBAAI,CAClB;QACE,MAAM,EAAK,KAAK;QAChB,QAAQ,UAAA;QACR,SAAS,EAAE,OAAO;KACnB,EACD,IAAI,EACJ,QAAQ,EACR,YAAY,EACZ,SAAS,CACV,CAAC;;IAGF,IAAM,WAAW,GAAG,CAACC,yBAAa,CAAC,KAAK,CAAC,QAAQ,CAAC,CAAC;IAEnD,IAAM,WAAW,GAAG,UAAC,CAAgC;;QAEnD,IAAI,OAAO,IAAI,CAAC,QAAQ,EAAE;;YAExB,CAAC,CAAC,eAAe,EAAE,CAAC;YAEpB,OAAO,CAAC,CAAC,EAAE,KAAK,CAAC,CAAC;SACnB;KACF,CAAC;;;;IAMF,IAAM,oBAAoB,GAAGC,aAAa,CACxC;QACE,IAAI,WAAW,EAAE;YACf,OAAO,IAAI,CAAC;SACb;QAED,IAAI,IAAI,EAAE;YACR,OAAO,IAAI,CAAC,MAAM,CAAC,IAAI,EAAE,EAAE,eAAe,EAAE,KAAK,EAAE,CAAC,CAAC;SACtD;QAED,OAAO,OAAO,CAAC;KAChB,EACD,CAAE,IAAI,EAAE,OAAO,EAAE,WAAW,CAAE,CAC/B,CAAC;IAEF,IAAM,YAAY,GAAGA,aAAa,CAChC,cAAM,QAAC,KAAK,KAAK,IAAI;UACjBC,oBAAC,KAAK,OAAG;UACT,KAAK,CAAC,MAAM,CAAC,KAAK,EAAE;YACpB,eAAe,EAAE,KAAK;SACvB,CAAC,IAAC,EACL,CAAE,KAAK,CAAE,CACV,CAAC;;;;IAMF,IAAM,aAAa,IACjBA,oBAAC,WAAW,sBAAK,IAAI,IAAE,OAAO,EAAE,WAAW,EAAE,SAAS,EAAE,OAAO;QAC7DA,6BAAK,SAAS,EAAE,SAAS,IACtB,WAAW,GAAG,QAAQ,GAAG,oBAAoB,CAC1C;QACL,YAAY,CACD,CACf,CAAC;IAEF,OAAO,OAAO,IAAI,CAAC,QAAQ;WAEvBA,oBAAC,KAAK,IACJ,OAAO,EAAE,aAAa,EACtB,OAAO,EAAE,OAAO,GAChB;UAEF,aAAa,CAAC;AACpB,EAAE;AAEF,MAAM,CAAC,WAAW,GAAG,QAAQ,CAAC;AAE9B,MAAM,CAAC,YAAY,GAAG;IACpB,IAAI,EAAE,OAAO;CACU,CAAC;AAE1B,MAAM,CAAC,MAAM,GAAGC,kCAAsB,CAAC,MAAM,EAAE,UAAC,OAAO,IAAK,QAAC,EAAE,OAAO,SAAA,EAAE,IAAC,CAAC;;;;"}